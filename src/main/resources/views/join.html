<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
          integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
          crossorigin="anonymous" />
    <link href="/css/login.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div align="center">
    <form action="#" method="post">
        <table>
            <colgroup>
                <col width="130px"><col width="210px">
            </colgroup>
            <thead>
            <tr>
                <th colspan="3" align="center"><h3>Join</h3>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>아이디</td>
                <td><input type="text" name="userId" id="userId" class="input" placeholder="Email로 입력해주세요."></td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <p id="p_id"></p>
                </td>
            </tr>
            <tr>
                <td>비밀번호</td>
                <td><input type="password" name="userPw" id="userPw" class="input" placeholder="PW를 입력해주세요."></td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <p id="p_pw"></p>
                </td>
            </tr>
            <tr>
                <td>비밀번호재확인</td>
                <td><input type="password" id="userPwCheck" class="input" placeholder="PW를 재입력해주세요."></td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <p id="p_pw_confirm"></p>
                </td>
            </tr>
            <tr>
                <td>이름</td>
                <td><input type="text" name="userName" id="userName" class="input" placeholder="이름을 입력해주세요."></td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <p id="p_name"></p>
                </td>
            </tr>
            <tr>
                <td>전화번호</td>
                <td>
                    <input
                            type="tel"
                            class="input"
                            name="userPhone"
                            id="userPhone"
                            required
                            pattern="[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}"
                            maxlength="13"
                            placeholder="예) 010-1234-5678"
                    />
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <p id="p_phone"></p>
                </td>
            </tr>

            <td colspan="2" align="center">
                <button type="button" id="btn_login" class="btn joins">회원가입</button>
                <button type="button" id="btn_join" class="btn back" onclick="location.href='#'">뒤로가기</button>
            </td>
            </tbody>

        </table>
    </form>
</div>
<script type="text/javascript">
    let id = document.getElementById('userId');
    let pw = document.getElementById('userPw');
    let pw_check = document.getElementById('userPwCheck');
    let name = document.getElementById('userName');
    let phone = document.getElementById('userPhone');

    let p_id = document.getElementById('p_id');
    let p_pw = document.getElementById('p_pw');
    let p_pw_check = document.getElementById('p_pw_confirm');
    let p_name = document.getElementById('p_name');
    let p_phone = document.getElementById('p_phone');

    /* 정규식 */
    let emailCheck = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/;
    let pwdCheck= /^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,16}$/;

    id.onblur = function (){
        if(id.value.trim() == "") {
            p_id.style.color = 'red';
            p_id.innerHTML = '필수정보입니다.';
        }else if(! emailCheck.test(id.value)){
            p_id.style.color = 'red';
            p_id.innerHTML = '이메일 형식에 맞지 않습니다.';
        }



        else {
            p_id.style.color = 'forestgreen';
            p_id.innerHTML = '사용가능한 아이디 입니다.';
        }
    }

    pw.onblur = function (){
        if(pw.value.trim() == "") {
            p_pw.style.color = 'red';
            p_pw.innerHTML = '필수정보입니다';
        }else if(! pwdCheck.test(pw.value)){
            p_pw.style.color = 'red';
            p_pw.innerHTML = '비밀번호는 영문+숫자+특수문자 조합(8~16자리)';
        }


        else {
            p_pw.style.color = 'forestgreen';
            p_pw.innerHTML = '사용가능한 비밀번호 입니다.';
        }
    }

    pw_check.onblur = function (){
        if(pw_check.value.trim() == "") {
            p_pw_check.style.color = 'red';
            p_pw_check.innerHTML = '비밀번호를 재확인 해주세요.';
        }else if(pw.value != pw_check.value){
            p_pw_check.style.color = 'red';
            p_pw_check.innerHTML = '비밀번호와 맞지 않습니다.';
        }


        else {
            p_pw_check.style.color = 'forestgreen';
            p_pw_check.innerHTML = '재확인이 완료되었습니다.';
        }
    }

    name.onblur = function (){
        if(name.value.trim() == "") {
            p_name.style.color = 'red';
            p_name.innerHTML = '필수정보입니다.';
        }
        else {
            p_name.style.color = 'forestgreen';
            p_name.innerHTML = '참 이쁜 이름이네요!';
        }
    }

    phone.onblur = function (){
        if(phone.value.trim() == ""){
            p_phone.style.color = 'red';
            p_phone.innerHTML = '필수정보입니다.';
        }

        else {
            phone.value = autoHypenTel(phone.value.trim())
        }
    }



    function autoHypenTel(str) {
        str = str.replace(/[^0-9]/g, '');
        var tmp = '';

        if (str.substring(0, 2) == 02) {
            // 서울 전화번호일 경우 10자리까지만 나타나고 그 이상의 자리수는 자동삭제
            if (str.length < 3) {
                return str;
            } else if (str.length < 6) {
                tmp += str.substr(0, 2);
                tmp += '-';
                tmp += str.substr(2);
                return tmp;
            } else if (str.length < 10) {
                tmp += str.substr(0, 2);
                tmp += '-';
                tmp += str.substr(2, 3);
                tmp += '-';
                tmp += str.substr(5);
                return tmp;
            } else {
                tmp += str.substr(0, 2);
                tmp += '-';
                tmp += str.substr(2, 4);
                tmp += '-';
                tmp += str.substr(6, 4);
                return tmp;
            }
        } else {
            // 핸드폰 및 다른 지역 전화번호 일 경우
            if (str.length < 4) {
                return str;
            } else if (str.length < 7) {
                tmp += str.substr(0, 3);
                tmp += '-';
                tmp += str.substr(3);
                return tmp;
            } else if (str.length < 11) {
                tmp += str.substr(0, 3);
                tmp += '-';
                tmp += str.substr(3, 3);
                tmp += '-';
                tmp += str.substr(6);
                return tmp;
            } else {
                tmp += str.substr(0, 3);
                tmp += '-';
                tmp += str.substr(3, 4);
                tmp += '-';
                tmp += str.substr(7);
                return tmp;
            }
        }

        return str;
    }

</script>
</body>
</html>